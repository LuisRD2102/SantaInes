@model Tuple<UsuarioModel, DireccionModel , HistoriaMedicaModel>
@{
    ViewData["Title"] = "Historia Médica";
}

<head>
    <link rel="stylesheet" href="~/css/HistoriaMedica.css" />
    <link rel="stylesheet" href="~/css/Modal.css" /> 
    <link rel="stylesheet" href="~/css/Toaster.css" />
</head>

<div class="top-bar">
    <div class="titulo-top">
        <h2>Historia médica</h2>
    </div>
</div>

<!--Alerta de mensajes exitosos-->
@if (Context.Request.Query["message"].Count() > 0)
{
    <center>
        <div class="alert alert-success text-center alert-dismissible fade show p-3" role="alert">
            <p class="fs-6 m-0">@Context.Request.Query["message"]</p>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    </center>
}

<div class="contenedor">

    @using (Html.BeginForm("ActualizarHistoriaMedica", "HistoriaMedica", FormMethod.Post))
        {
            <div class="modal-body">
                @*CAMPOS OCULTOS*@

                @*Usuario*@

                @Html.TextBoxFor(m => m.Item1.cedula, new { @Value = Model.Item1.cedula, @type="hidden", id="cedula"})
                @Html.TextBoxFor(m => m.Item1.sexo, new { @Value = Model.Item1.sexo, @type="hidden"})
                @Html.TextBoxFor(m => m.Item1.username, new { @Value = Model.Item1.username, @type="hidden"})
                @Html.TextBoxFor(m => m.Item1.id_direccion, new { @Value = Model.Item1.id_direccion, @type="hidden"})
                @Html.TextBoxFor(m => m.Item1.fecha_Nacimiento, new { @Value = Model.Item1.fecha_Nacimiento, @type="hidden"})
                @Html.TextBoxFor(m => m.Item1.password, new { @Value = Model.Item1.password, @type="hidden"})
                @Html.TextBoxFor(m => m.Item1.idHistoria, new { @Value = Model.Item1.idHistoria, @type="hidden"})

                @*Direccion*@

                @Html.TextBoxFor(m => m.Item2.id, new { @Value = Model.Item2.id, @type="hidden"})

                @*HistoriaMedica*@

                @Html.TextBoxFor(m => m.Item3.idHistoria, new { @Value = Model.Item3.idHistoria, @type="hidden"})

                <div class="flex">
                    <div class="in-flex">
                        <span style="margin-top:15px" class="span">Nombre completo: </span>
                        @Html.TextBoxFor(m => m.Item1.nombre_Completo, new {@Value = Model.Item1.nombre_Completo,Class="form-control", placeholder="Nombre(s): "})
                        @Html.ValidationMessageFor(m => m.Item1.nombre_Completo ,null, new { @class = "text-danger" })
                </div>
                    <div class="in-flex">
                        <span style="margin-top:15px" class="span">Apellido completo: </span>
                        @Html.TextBoxFor(m => m.Item1.apellido_Completo, new {@Value = Model.Item1.apellido_Completo,Class="form-control", placeholder="Apellido(s): "})
                    @Html.ValidationMessageFor(m => m.Item1.apellido_Completo ,null, new { @class = "text-danger" })
                    </div>
                </div>

                <div class="flex">
                    <div class="in-flex">
                        <span style="margin-top:15px" class="span">Teléfono: </span>
                        @Html.TextBoxFor(m => m.Item1.telefono, new {@Value = Model.Item1.telefono,Class="form-control", placeholder="Teléfono: ", id = "telefono"})
                        @Html.ValidationMessageFor(m => m.Item1.telefono ,null, new { @class = "text-danger" })
                    </div>
                    <div class="in-flex">
                        <span style="margin-top:15px" class="span">Correo electrónico: </span>
                        @Html.TextBoxFor(m => m.Item1.email, new {@Value = Model.Item1.email, Class="form-control", placeholder="Correo Electrónico: "})
                        @Html.ValidationMessageFor(m => m.Item1.email ,null, new { @class = "text-danger" })
                    </div>
                </div>

                <div class="flex">
                    <div class="in-flex">


                        <div class="double-flex">
                            <div class="in-flex">
                                <span style="margin-top:15px" class="span">Altura: </span>
                                @Html.TextBoxFor(m => m.Item3.altura,new{@Value = Model.Item3.altura,Class="form-control",id = "altura", placeholder = "Altura"})
                            </div>
                            <div class="in-flex">
                                <span style="margin-top:15px" class="span">Peso: </span>
                                @Html.TextBoxFor(m => m.Item3.peso, new{@Value = Model.Item3.peso,Class="form-control",id = "peso", placeholder = "Peso" })
                            </div>
                        </div>
                    <span style="margin-top:15px" class="span">Tipo de sangre: </span>
                    @Html.TextBoxFor(m => m.Item3.tipoSangre, new{@Value = Model.Item3.tipoSangre,Class="form-control", placeholder = "Tipo de sangre" })
                    </div>
                    
                    <div class="in-flex">
                        <div class="double-flex">
                            <div class="in-flex">
                                <span style="margin-top:15px" class="span">Municipio: </span>
                                @Html.TextBoxFor(m => m.Item2.municipio, new {@Value = Model.Item2.municipio,Class="form-control", placeholder="Municipio: "})
                                @Html.ValidationMessageFor(m => m.Item2.municipio ,null, new { @class = "text-danger" })
                            </div>
                         
                        </div>
                        <span style="margin-top:15px" class="span">Dirección: </span>
                        @Html.TextAreaFor(m => m.Item2.direccion, new {@Value = Model.Item2.direccion,Class="form-control area-direccion", placeholder="Dirección: "})
                        @Html.ValidationMessageFor(m => m.Item2.direccion ,null, new { @class = "text-danger" })

                    </div>
                </div>          

                <div>
                    <nav>
                        <div class="nav nav-tabs" id="nav-tab">
                            <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#nav-antPeronales" type="button" role="tab" aria-selected="true">Ant. Personales</button>
                            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#nav-antFamiliares" type="button" role="tab" aria-selected="false">Ant. Familiares</button>
                            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#nav-alergias" type="button" role="tab" aria-selected="false">Alergias</button>
                            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#nav-tratHabitual" type="button" role="tab" aria-selected="false">Trat. Habitual</button>
                            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#nav-interQuirur" type="button" role="tab" aria-selected="false">Interven. Quirúrgicas</button>
                            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#nav-patologias" type="button" role="tab" aria-selected="false">Patologías</button>
                            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#nav-referencias" type="button" role="tab" aria-selected="false">Referencias</button>
                            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#nav-diagnostico" type="button" role="tab" aria-selected="false">Diagnósticos</button>
                        </div>
                    </nav>
                    <div class="tab-content" id="nav-tabContent">
                        <div class="tab-pane fade show active" id="nav-antPeronales">
                            @Html.TextAreaFor(t => t.Item3.antPeronales, new { Class="form-control text-area-nav", placeholder = "Antecedentes personales..."});
                        </div>
                        <div class="tab-pane fade" id="nav-antFamiliares">
                            @Html.TextAreaFor(t => t.Item3.antFamiliares, new { Class="form-control text-area-nav", placeholder = "Antecedentes familiares..."});
                        </div>
                        <div class="tab-pane fade" id="nav-alergias">
                            @Html.TextAreaFor(t => t.Item3.alergias, new { Class="form-control text-area-nav", placeholder = "Alergias..."});
                        </div>
                        <div class="tab-pane fade" id="nav-tratHabitual">
                            @Html.TextAreaFor(t => t.Item3.tratHabitual, new { Class="form-control text-area-nav", placeholder = "Tratamientos habituales..."});
                        </div>
                        <div class="tab-pane fade" id="nav-interQuirur">
                            @Html.TextAreaFor(t => t.Item3.intQuirurgica, new { Class="form-control text-area-nav", placeholder = "Intervenciones quirúrgicas..."});
                        </div>
                        <div class="tab-pane fade" id="nav-patologias">
                            @Html.TextAreaFor(t => t.Item3.patologia, new { Class="form-control text-area-nav", placeholder = "Patologías..."});
                        </div>
                        <div class="tab-pane fade" id="nav-referencias">
                            @Html.TextAreaFor(t => t.Item3.referencias, new { Class="form-control text-area-nav", placeholder = "Referencias..."});
                        </div>
                        <div class="tab-pane fade" id="nav-diagnostico">
                            @Html.TextAreaFor(t => t.Item3.diagnostico, new { Class="form-control text-area-nav", placeholder = "Diagnósticos..."});
                        </div>
                    </div>
                </div>

            </div>

            <div class="modal-footer">
                <button type="submit" class="botonCancelar" formaction="@Url.Action("GestionUsuarios", "Usuarios")"> Cancelar</button>
                <button type="submit" class="botonCrear"> Guardar Cambios</button>
            </div>
    }
</div>


@section Scripts{

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.10/jquery.mask.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.17.0/jquery.validate.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validation-unobtrusive/3.2.11/jquery.validate.unobtrusive.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.10/jquery.mask.js"></script>


    <script>

        $(function () {
            $("#telefono").mask("(999) 999-9999");
            $("#altura").mask("9.99");
            $("#peso").mask("999.99");
            $("#cedula").mask("99999999");
            $("#postal").mask("9999");
        })

    </script>
}